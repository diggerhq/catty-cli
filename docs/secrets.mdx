---
title: "Secrets"
description: "Securely store and use secrets in your remote sessions"
---

Catty allows you to securely store secrets locally that are automatically passed to your remote sessions as environment variables.

## Quick Start

```bash
# Add GitHub token (interactive, recommended)
catty secrets add github

# Or set any secret
catty secrets set MY_API_KEY sk-xxx

# List your secrets
catty secrets list
```

When you run `catty new`, your secrets are automatically passed to the session.

---

## Managing Secrets

### Add a Secret

Interactive mode (hides input):

```bash
catty secrets add MY_SECRET
```

For GitHub, use the guided setup:

```bash
catty secrets add github
```

This opens GitHub's token creation page and validates your token.

### Set a Secret (Non-interactive)

```bash
catty secrets set MY_SECRET my-value
```

### List Secrets

```bash
catty secrets list
```

Shows secret names only, never values.

### Remove a Secret

```bash
catty secrets remove MY_SECRET
```

### Test a Secret

Currently supports testing GitHub tokens:

```bash
catty secrets test github
```

---

## GitHub Integration

With a GitHub token configured, Claude can use Git and the GitHub CLI (`gh`) in your sessions.

### Setup

```bash
catty secrets add github
```

This guided process:
1. Opens GitHub's token creation page
2. Prompts you to paste the token
3. Validates the token works
4. Saves both `GITHUB_TOKEN` and `GH_TOKEN`

### Required Scopes

When creating the token, select:
- `repo` - Full control of private repositories

### What Claude Can Do

With a GitHub token, Claude can:
- Clone private repositories
- Push commits to branches
- Create pull requests
- Manage issues
- Use the `gh` CLI for any GitHub operation

### Example Session

```bash
# In a Catty session, Claude can run:
git clone https://github.com/yourorg/private-repo
gh pr create --title "Add feature" --body "Description"
```

---

## Security

### Encryption

Secrets are encrypted using:
- **Algorithm**: AES-256-GCM (authenticated encryption)
- **Key derivation**: scrypt from machine-specific data
- **Per-secret IV**: Each secret has a unique initialization vector

### Storage

- **Location**: `~/.catty/secrets.json`
- **Permissions**: `0600` (owner read/write only)
- **Format**: `v1:<iv>:<authTag>:<ciphertext>`

### Machine Binding

The encryption key is derived from:
- Hostname
- Home directory path

This means:
- Secrets can only be decrypted on the machine they were created on
- Copying `secrets.json` to another machine won't work
- If you reinstall your OS or change hostname, you'll need to re-add secrets

### Transmission

Secrets are:
1. Decrypted locally when you run `catty new`
2. Sent to the API over HTTPS
3. Passed to the session machine as environment variables
4. Never stored on Catty servers

---

## Using Secrets in Sessions

Secrets appear as environment variables in your session:

```bash
# In session
echo $GITHUB_TOKEN
echo $MY_API_KEY
```

Claude can access them in code:

```python
import os
api_key = os.environ.get('MY_API_KEY')
```

### Blocked Names

These names are reserved and cannot be used:
- System: `PATH`, `HOME`, `USER`, `SHELL`, `PWD`
- Catty internal: `CONNECT_TOKEN`, `CATTY_CMD`, `SESSION_LABEL`
- Cloud credentials: `R2_*`, `AWS_*`, `FLY_*`

---

## Skipping Secrets

Start a session without passing secrets:

```bash
catty new --no-secrets
```

---

## Best Practices

<AccordionGroup>
  <Accordion title="Use GitHub token for private repos">
    If you're working with private repositories, set up a GitHub token. This allows Claude to clone, push, and create PRs.
  </Accordion>

  <Accordion title="Use minimal token scopes">
    Only grant the permissions your workflow needs. For most cases, `repo` scope is sufficient for GitHub.
  </Accordion>

  <Accordion title="Rotate tokens periodically">
    Update your secrets regularly. Use `catty secrets remove` and `catty secrets add` to rotate.
  </Accordion>

  <Accordion title="Don't share secrets.json">
    The secrets file is encrypted but should still be treated as sensitive. Don't commit it to version control.
  </Accordion>
</AccordionGroup>
